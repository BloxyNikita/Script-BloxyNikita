-- LocalScript в StarterPlayerScripts

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Создаем ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "BloxyNikitaGui"
screenGui.Parent = playerGui

-- Функция для поиска игрока по приоритету
local function findTargetPlayer(primaryName, secondaryName)
    local primaryPlayer = Players:FindFirstChild(primaryName)
    if primaryPlayer and primaryPlayer.Character then
        return primaryPlayer
    end
    
    local secondaryPlayer = Players:FindFirstChild(secondaryName)
    if secondaryPlayer and secondaryPlayer.Character then
        return secondaryPlayer
    end
    
    return nil
end

-- Функция для создания кнопки
local function createButton(buttonName, buttonText, targetConfig, position)
    local teleportButton = Instance.new("TextButton")
    teleportButton.Name = buttonName
    teleportButton.Size = UDim2.new(0, 120, 0, 50)
    teleportButton.Position = UDim2.new(0, 900, 0, 26)
    teleportButton.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    teleportButton.TextColor3 = Color3.fromRGB(220, 220, 220)
    teleportButton.Text = buttonText
    teleportButton.TextScaled = true
    teleportButton.Font = Enum.Font.GothamMedium
    teleportButton.BorderSizePixel = 2
    teleportButton.BorderColor3 = Color3.fromRGB(100, 100, 100)
    teleportButton.Parent = screenGui

    -- Добавляем скругление углов
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 12)
    corner.Parent = teleportButton

    -- Добавляем тень/эффект глубины
    local shadow = Instance.new("UIStroke")
    shadow.Color = Color3.fromRGB(0, 0, 0)
    shadow.Thickness = 2
    shadow.Parent = teleportButton

    -- Переменные для перемещения кнопки
    local isDragging = false
    local dragStart
    local buttonStartPosition

    -- Функция для перемещения кнопки
    local function startDrag(input)
        isDragging = true
        dragStart = input.Position
        buttonStartPosition = teleportButton.Position
        
        -- Эффект при захвате
        teleportButton.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    end

    local function endDrag(input)
        isDragging = false
        
        -- Возвращаем нормальный цвет
        teleportButton.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
    end

    local function updateDrag(input)
        if isDragging then
            local delta = input.Position - dragStart
            local newPosition = UDim2.new(
                buttonStartPosition.X.Scale,
                buttonStartPosition.X.Offset + delta.X,
                buttonStartPosition.Y.Scale,
                buttonStartPosition.Y.Offset + delta.Y
            )
            teleportButton.Position = newPosition
        end
    end

    -- Подключаем обработчики для перемещения
    teleportButton.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            startDrag(input)
        end
    end)

    teleportButton.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            endDrag(input)
        end
    end)

    UserInputService.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
            updateDrag(input)
        end
    end)

    -- Функция для телепортации к игроку
    local function teleportToTarget()
        local targetPlayer
        
        if buttonName == "BloxiButton" then
            -- Для кнопки "блокси" ищем по приоритету
            targetPlayer = findTargetPlayer(targetConfig.primary, targetConfig.secondary)
        else
            -- Для кнопки "сизян" ищем только одного игрока
            targetPlayer = Players:FindFirstChild(targetConfig)
        end
        
        if targetPlayer and targetPlayer.Character then
            local humanoidRootPart = targetPlayer.Character:FindFirstChild("HumanoidRootPart")
            local targetCharacter = player.Character
            
            if humanoidRootPart and targetCharacter then
                local targetHRP = targetCharacter:FindFirstChild("HumanoidRootPart")
                
                if targetHRP then
                    -- Телепортируем персонажа
                    targetHRP.CFrame = humanoidRootPart.CFrame + Vector3.new(0, 3, 0)
                    
                    -- Визуальная обратная связь
                    teleportButton.Text = "Телепортация!"
                    teleportButton.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
                    
                    -- Анимация кнопки
                    local tweenInfo = TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
                    local tween = TweenService:Create(teleportButton, tweenInfo, {Size = UDim2.new(0, 130, 0, 55)})
                    tween:Play()
                    
                    wait(0.5)
                    
                    -- Возвращаем кнопку в исходное состояние
                    teleportButton.Text = buttonText
                    teleportButton.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
                    local tweenBack = TweenService:Create(teleportButton, tweenInfo, {Size = UDim2.new(0, 120, 0, 50)})
                    tweenBack:Play()
                else
                    warn("У вашего персонажа нет HumanoidRootPart")
                end
            else
                teleportButton.Text = "Игрок не найден"
                wait(1)
                teleportButton.Text = buttonText
            end
        else
            teleportButton.Text = "Игрок не найден"
            wait(1)
            teleportButton.Text = buttonText
        end
    end

    -- Обработчик нажатия на кнопку
    teleportButton.MouseButton1Click:Connect(function()
        teleportToTarget()
    end)

    -- Также обрабатываем Touch события для мобильных устройств
    teleportButton.TouchTap:Connect(function()
        teleportToTarget()
    end)

    return teleportButton
end

-- Проверяем ник игрока и создаем соответствующие кнопки
local playerName = player.Name

if playerName == "chat_000999" or playerName == "lkaioa321421421" then
    -- Создаем кнопку "сизян" для телепортации к evreiiii2
    createButton("SizyanButton", "сизян", "evreiiii2", UDim2.new(0, 50, 0, 50))
    print("Кнопка 'сизян' создана для игрока: " .. playerName)
    
elseif playerName == "evreiiii2" then
    -- Создаем кнопку "блокси" для телепортации к lkaioa321421421 (или chat_000999)
    createButton("BloxiButton", "блокси", {primary = "lkaioa321421421", secondary = "chat_000999"}, UDim2.new(0, 50, 0, 50))
    print("Кнопка 'блокси' создана для игрока: " .. playerName)
    
else
    -- Создаем обе кнопки для других игроков
    createButton("SizyanButton", "сизян", "evreiiii2", UDim2.new(0, 50, 0, 50))
    createButton("BloxiButton", "блокси", {primary = "lkaioa321421421", secondary = "chat_000999"}, UDim2.new(0, 180, 0, 50))
    print("Обе кнопки созданы для игрока: " .. playerName)
end

print("Система телепортаций загружена!")







-- LocalScript в StarterPlayerScripts

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Переменные
local defaultWalkSpeed = 26
local currentWalkSpeed = defaultWalkSpeed

-- Основной контейнер (компактный)
local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0, 200, 0, 150)  -- Уменьшенный размер
mainFrame.Position = UDim2.new(0, 848, 0, 84)  -- Обновленная позиция
mainFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
mainFrame.BorderSizePixel = 0
mainFrame.Parent = screenGui

-- Скругление углов
local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 8)
corner.Parent = mainFrame

-- Тень
local shadow = Instance.new("UIStroke")
shadow.Color = Color3.fromRGB(20, 20, 20)
shadow.Thickness = 1
shadow.Parent = mainFrame

-- Заголовок (компактный)
local title = Instance.new("TextLabel")
title.Name = "Title"
title.Size = UDim2.new(1, 0, 0, 25)  -- Уменьшенная высота
title.Position = UDim2.new(0, 0, 0, 0)
title.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
title.TextColor3 = Color3.fromRGB(220, 220, 220)
title.Text = "Скорость"
title.TextScaled = true
title.Font = Enum.Font.GothamMedium
title.Parent = mainFrame

local titleCorner = Instance.new("UICorner")
titleCorner.CornerRadius = UDim.new(0, 8)
titleCorner.Parent = title

-- Поле ввода скорости (компактное)
local speedInput = Instance.new("TextBox")
speedInput.Name = "SpeedInput"
speedInput.Size = UDim2.new(0.9, 0, 0, 30)  -- Уменьшенная высота
speedInput.Position = UDim2.new(0.05, 0, 0.2, 0)
speedInput.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
speedInput.TextColor3 = Color3.fromRGB(220, 220, 220)
speedInput.PlaceholderText = "Число"
speedInput.PlaceholderColor3 = Color3.fromRGB(150, 150, 150)
speedInput.Text = ""
speedInput.TextScaled = true
speedInput.Font = Enum.Font.Gotham
speedInput.Parent = mainFrame

local inputCorner = Instance.new("UICorner")
inputCorner.CornerRadius = UDim.new(0, 6)
inputCorner.Parent = speedInput

-- Кнопка установки скорости (серая)
local setSpeedButton = Instance.new("TextButton")
setSpeedButton.Name = "SetSpeedButton"
setSpeedButton.Size = UDim2.new(0.9, 0, 0, 30)  -- Уменьшенная высота
setSpeedButton.Position = UDim2.new(0.05, 0, 0.45, 0)
setSpeedButton.BackgroundColor3 = Color3.fromRGB(80, 80, 80)  -- Серый цвет
setSpeedButton.TextColor3 = Color3.fromRGB(220, 220, 220)
setSpeedButton.Text = "Установить"
setSpeedButton.TextScaled = true
setSpeedButton.Font = Enum.Font.GothamMedium
setSpeedButton.Parent = mainFrame

local setButtonCorner = Instance.new("UICorner")
setButtonCorner.CornerRadius = UDim.new(0, 6)
setButtonCorner.Parent = setSpeedButton

-- Кнопка обычной скорости (серая)
local normalSpeedButton = Instance.new("TextButton")
normalSpeedButton.Name = "NormalSpeedButton"
normalSpeedButton.Size = UDim2.new(0.9, 0, 0, 30)  -- Уменьшенная высота
normalSpeedButton.Position = UDim2.new(0.05, 0, 0.7, 0)
normalSpeedButton.BackgroundColor3 = Color3.fromRGB(80, 80, 80)  -- Серый цвет
normalSpeedButton.TextColor3 = Color3.fromRGB(220, 220, 220)
normalSpeedButton.Text = "Обычная (26)"
normalSpeedButton.TextScaled = true
normalSpeedButton.Font = Enum.Font.GothamMedium
normalSpeedButton.Parent = mainFrame

local normalButtonCorner = Instance.new("UICorner")
normalButtonCorner.CornerRadius = UDim.new(0, 6)
normalButtonCorner.Parent = normalSpeedButton

-- Функция для установки скорости
local function setWalkSpeed(speed)
    local character = player.Character
    if character then
        local humanoid = character:FindFirstChildOfClass("Humanoid")
        if humanoid then
            humanoid.WalkSpeed = speed
            currentWalkSpeed = speed
            return true
        end
    end
    return false
end

-- Функция для анимации кнопки
local function animateButton(button)
    local originalSize = button.Size
    local tweenInfo = TweenInfo.new(0.1, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
    local tween = TweenService:Create(button, tweenInfo, {Size = originalSize + UDim2.new(0, 3, 0, 3)})
    local tweenBack = TweenService:Create(button, tweenInfo, {Size = originalSize})
    
    tween:Play()
    tween.Completed:Connect(function()
        tweenBack:Play()
    end)
end

-- Обработчик кнопки установки скорости
setSpeedButton.MouseButton1Click:Connect(function()
    animateButton(setSpeedButton)
    
    local speedText = speedInput.Text
    local speed = tonumber(speedText)
    
    if speed then
        if speed >= 0 and speed <= 500 then
            if setWalkSpeed(speed) then
                setSpeedButton.Text = "Успех!"
                setSpeedButton.BackgroundColor3 = Color3.fromRGB(60, 100, 60)
                
                wait(1.5)
                setSpeedButton.Text = "Установить"
                setSpeedButton.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
            else
                setSpeedButton.Text = "Ошибка"
                setSpeedButton.BackgroundColor3 = Color3.fromRGB(100, 60, 60)
                wait(1.5)
                setSpeedButton.Text = "Установить"
                setSpeedButton.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
            end
        else
            setSpeedButton.Text = "0-500!"
            setSpeedButton.BackgroundColor3 = Color3.fromRGB(100, 80, 60)
            wait(1.5)
            setSpeedButton.Text = "Установить"
            setSpeedButton.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
        end
    else
        setSpeedButton.Text = "Число!"
        setSpeedButton.BackgroundColor3 = Color3.fromRGB(100, 60, 60)
        wait(1.5)
        setSpeedButton.Text = "Установить"
        setSpeedButton.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
    end
end)

-- Обработчик кнопки обычной скорости
normalSpeedButton.MouseButton1Click:Connect(function()
    animateButton(normalSpeedButton)
    
    if setWalkSpeed(defaultWalkSpeed) then
        normalSpeedButton.Text = "26"
        normalSpeedButton.BackgroundColor3 = Color3.fromRGB(60, 100, 60)
        
        wait(1.5)
        normalSpeedButton.Text = "Обычная (26)"
        normalSpeedButton.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
    else
        normalSpeedButton.Text = "Ошибка"
        normalSpeedButton.BackgroundColor3 = Color3.fromRGB(100, 60, 60)
        wait(1.5)
        normalSpeedButton.Text = "Обычная (26)"
        normalSpeedButton.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
    end
end)

-- Функция для перемещения окна
local isDragging = false
local dragStart
local frameStartPosition

local function startDrag(input)
    isDragging = true
    dragStart = input.Position
    frameStartPosition = mainFrame.Position
end

local function endDrag(input)
    isDragging = false
end

local function updateDrag(input)
    if isDragging then
        local delta = input.Position - dragStart
        local newPosition = UDim2.new(
            frameStartPosition.X.Scale,
            frameStartPosition.X.Offset + delta.X,
            frameStartPosition.Y.Scale,
            frameStartPosition.Y.Offset + delta.Y
        )
        mainFrame.Position = newPosition
    end
end

-- Подключаем обработчики для перемещения
title.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        startDrag(input)
    end
end)

title.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        endDrag(input)
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement then
        updateDrag(input)
    end
end)

-- Автоматически устанавливаем стандартную скорость при появлении персонажа
player.CharacterAdded:Connect(function(character)
    wait(1)
    setWalkSpeed(currentWalkSpeed)
end)

print("Компактный контроль скорости загружен! Позиция: {848, 84}")
